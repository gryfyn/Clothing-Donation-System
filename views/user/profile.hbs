<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Griffins Geoffrey Adero - Software Engineer & Web Developer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">
    <link href='https://fonts.googleapis.com/css?family=Roboto Slab' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet'>
    <link rel="stylesheet" href="./css/profile.css">
    <style>
        body{
            font-family: 'Rubik';
        }
    </style>
</head>

<body>

    <header>
        <div style="font-size: 42px;"><i class="fa fa-heartbeat" aria-hidden="true" style="color: #B53389; margin-top: 20px;"></i>
              Donation Hub</div>
        <div id="nav">
            <a href="/home-page">HOME</a>
            <a href="/donate-page"  >DONATE</a>
            <a href="/aboutus-page" >ABOUT US</a>
            <a href="/centers-page">CENTERS</a>
            <a href="/contact-us-page">CONTACT US</a>
        </div>

    </header>
    <div id="nav2">
            <a href="/profile-page">VIEW PROFILE</a>
            <a href="/previous-donations"  >PREVIOUS DONATIONS</a>
            <a href="/leaderboard-page" >LEADERBOARD</a>
            <a href="/badges-page">BADGES</a>
        </div>

    <div id="socials-links">
        
        <a href="/linkedIn-link"><i class="fa fa-linkedin" aria-hidden="true"></i></a><br>
        <a href="/instagram-link"><i class="fa fa-instagram" aria-hidden="true"></i></a><br>
        <a href="/facebook-link"><i class="fa fa-facebook" aria-hidden="true"></i></a><br>
        <a href="/twitter-link"><i class="fa fa-twitter" aria-hidden="true"></i></a>
    </div>

    <div id="#mainbody" style="height:800px; margin-left: 80px; margin-top: 140px; font-size:28px; color: #B53389; font-family: 'Rubik';" >
        <div id="profile">
            <form action="/profile-page"><button id="user" action="/profile-page"><i class="fa fa-user-circle" aria-hidden="true"> </i>    User Profile</button> </form>
            <form action="/logout"><button id="logout" action="/logout"> Logout <i class="fa fa-sign-out" aria-hidden="true"></i></button> </form>
        </div>
        <div class="user-icon">
            <i class="fa fa-user-circle" aria-hidden="true"></i>
        </div>
    <div class="profile-container">
        <form class="profile-form">
        <label for="userId">User ID:</label>
        <input type="text" id="userId" name="userId" readonly>

        <label for="userEmail">Email:</label>
        <input type="email" id="userEmail" name="userEmail" readonly>

        <label for="userEmail">Level:</label>
        <input type="email" id="userLevel" name="userLevel" readonly>

        <div class="profile-form-buttons">
            <button class="logout-button" onclick="logout()">Logout <i class="fa fa-sign-out" aria-hidden="true"></i></button>
            <button class="delete-button" onclick="deleteUser()">Delete <i class="fa fa-trash" aria-hidden="true"></i></button>
        </div>
        </form>
    </div>
        <P style="text-align: center; font-size: 20px;">You can increase your levels by donating more. <br>
            Legend: <br>
        Level 1: 0 to 2 Donations <br>
        Level 2: 3 to 5 Donations <br>
        Level 3: 6 to 10 Donations <br>
        Level 4: 11 to 15 Donations <br>
        Level 5: Above 15 Donations <br>
    </P>
        
    </div>

    </div>

    <footer>
        <div id="contacts">
            <a href="/linkedIn-link"><i class="fa fa-linkedin" aria-hidden="true" style="color: #000"></i></a>  &nbsp;  &nbsp;
            <a href="/instagram-link"><i class="fa fa-instagram" aria-hidden="true" style="color: #000;"></i></a>  &nbsp;  &nbsp;
            <a href="/facebook-link"><i class="fa fa-facebook" aria-hidden="true" style="color: #000;"></i></a>  &nbsp;  &nbsp;
            <a href="/twitter-link"><i class="fa fa-twitter" aria-hidden="true" style="color: #000;"></i></a>
            <p><i class="fa fa-phone" aria-hidden="true"></i>: &nbsp; +254719508717 <br>
            <i class="fa fa-envelope" aria-hidden="true"></i>: &nbsp; donationhub@gmail.com <br>
            &copy; 2024 Donation Hub Inc. All rights reserved.</p>
        </div>
        
        
    </footer>

    <script>

document.addEventListener("DOMContentLoaded", function () {
    // Fetch user information when the page is loaded
    getUserProfile();
});

// User data
let user;

// Function to populate user information
function populateUserInfo() {
    const userIdInput = document.getElementById("userId");
    const userEmailInput = document.getElementById("userEmail");
    const userLevelInput = document.getElementById("userLevel");

    userIdInput.value = user.donorid;
    userEmailInput.value = user.email;
    userLevelInput.value = getLevel(user.donationnumber);
}

// Function to fetch user profile
function getUserProfile() {
    fetch('/get-user-profile')
        .then(response => response.json())
        .then(data => {
            user = data;
            populateUserInfo();
        })
        .catch(error => {
            console.error('Error fetching user profile:', error);
        });
}

// Function to get donation level
function getLevel(donations) {
    if (donations >= 0 && donations <= 2) {
        return "Level 1";
    } else if (donations >= 3 && donations <= 5) {
        return "Level 2";
    } else if (donations >= 6 && donations <= 10) {
        return "Level 3";
    } else if (donations >= 11 && donations <= 15) {
        return "Level 4";
    } else {
        return "Level 5";
    }
}


// Call the function to get user information
getUserProfile();


function deleteUser() {
    window.location.href = '/delete-user'; // Replace with your actual endpoint
}

function logout() {
    window.location.href = '/logout'; // Replace with your actual endpoint
}


    
</script>

</body>

</html>
